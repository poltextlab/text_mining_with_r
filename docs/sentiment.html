<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Szótárak és érzelemelemzés | Szövegbányászat és mesterséges intelligencia R-ben</title>
  <meta name="description" content="Jelen kötet a Kvantitatív szövegelemzés és szövegbányászat a politikatudományban (L’Harmattan, 2016) című könyv folytatásaként és egyben kiegészítéseként a szövegbányászat és a mesterséges intelligencia társadalomtudományi alkalmazásának gyakorlatába nyújt bevezetést." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Szótárak és érzelemelemzés | Szövegbányászat és mesterséges intelligencia R-ben" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Jelen kötet a Kvantitatív szövegelemzés és szövegbányászat a politikatudományban (L’Harmattan, 2016) című könyv folytatásaként és egyben kiegészítéseként a szövegbányászat és a mesterséges intelligencia társadalomtudományi alkalmazásának gyakorlatába nyújt bevezetést." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Szótárak és érzelemelemzés | Szövegbányászat és mesterséges intelligencia R-ben" />
  
  <meta name="twitter:description" content="Jelen kötet a Kvantitatív szövegelemzés és szövegbányászat a politikatudományban (L’Harmattan, 2016) című könyv folytatásaként és egyben kiegészítéseként a szövegbányászat és a mesterséges intelligencia társadalomtudományi alkalmazásának gyakorlatába nyújt bevezetést." />
  

<meta name="author" content="Sebők Miklós, Ring Orsolya, Máté Ákos" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="leiro-stat.html"/>
<link rel="next" href="lda-ch.html"/>
<script src="libs/header-attrs-2.7.10/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Üdvözöljük!</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Bevezetés</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#a-kötet-témái"><i class="fa fa-check"></i><b>1.1</b> A kötet témái</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#a-kötet-témái-1"><i class="fa fa-check"></i><b>1.2</b> A kötet témái</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#használati-utasítás"><i class="fa fa-check"></i><b>1.3</b> Használati utasítás</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#a-hunminer-használata"><i class="fa fa-check"></i><b>1.4</b> A HunMineR használata</a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#köszönetnyilvánítás"><i class="fa fa-check"></i><b>1.5</b> Köszönetnyilvánítás</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="alapfogalmak.html"><a href="alapfogalmak.html"><i class="fa fa-check"></i><b>2</b> Alapfogalmak</a>
<ul>
<li class="chapter" data-level="2.1" data-path="alapfogalmak.html"><a href="alapfogalmak.html#elméleti-alapok"><i class="fa fa-check"></i><b>2.1</b> Elméleti alapok</a></li>
<li class="chapter" data-level="2.2" data-path="alapfogalmak.html"><a href="alapfogalmak.html#fogalmi-alapok"><i class="fa fa-check"></i><b>2.2</b> Fogalmi alapok</a></li>
<li class="chapter" data-level="2.3" data-path="alapfogalmak.html"><a href="alapfogalmak.html#a-szövegbányászat-alapelvei"><i class="fa fa-check"></i><b>2.3</b> A szövegbányászat alapelvei</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="adatkezeles.html"><a href="adatkezeles.html"><i class="fa fa-check"></i><b>3</b> Az adatkezelés R-ben</a>
<ul>
<li class="chapter" data-level="3.1" data-path="adatkezeles.html"><a href="adatkezeles.html#adatok-importálása"><i class="fa fa-check"></i><b>3.1</b> Adatok importálása</a></li>
<li class="chapter" data-level="3.2" data-path="adatkezeles.html"><a href="adatkezeles.html#adatok-exportálása"><i class="fa fa-check"></i><b>3.2</b> Adatok exportálása</a></li>
<li class="chapter" data-level="3.3" data-path="adatkezeles.html"><a href="adatkezeles.html#a-pipe-operátor"><i class="fa fa-check"></i><b>3.3</b> A pipe operátor</a></li>
<li class="chapter" data-level="3.4" data-path="adatkezeles.html"><a href="adatkezeles.html#műveletek-adattáblákkal"><i class="fa fa-check"></i><b>3.4</b> Műveletek adattáblákkal</a></li>
<li class="chapter" data-level="3.5" data-path="adatkezeles.html"><a href="adatkezeles.html#munka-karakter-vektorokkaladatkezel-4"><i class="fa fa-check"></i><b>3.5</b> Munka karakter vektorokkal</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="corpus-ch.html"><a href="corpus-ch.html"><i class="fa fa-check"></i><b>4</b> Korpuszépítés és szövegelőkészítés</a>
<ul>
<li class="chapter" data-level="4.1" data-path="corpus-ch.html"><a href="corpus-ch.html#szövegbeszerzés"><i class="fa fa-check"></i><b>4.1</b> Szövegbeszerzés</a></li>
<li class="chapter" data-level="4.2" data-path="corpus-ch.html"><a href="corpus-ch.html#szövegelőkészítés"><i class="fa fa-check"></i><b>4.2</b> Szövegelőkészítés</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="corpus-ch.html"><a href="corpus-ch.html#tokenizálás-szótövezés-kisbetűsítés-és-a-tiltólistás-szavak-eltávolítása"><i class="fa fa-check"></i><b>4.2.1</b> Tokenizálás, szótövezés, kisbetűsítés és a tiltólistás szavak eltávolítása</a></li>
<li class="chapter" data-level="4.2.2" data-path="corpus-ch.html"><a href="corpus-ch.html#dokumentum-kifejezés-mátrix-dtm"><i class="fa fa-check"></i><b>4.2.2</b> Dokumentum kifejezés mátrix (DTM)</a></li>
<li class="chapter" data-level="4.2.3" data-path="corpus-ch.html"><a href="corpus-ch.html#súlyozás"><i class="fa fa-check"></i><b>4.2.3</b> Súlyozás</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="leiro-stat.html"><a href="leiro-stat.html"><i class="fa fa-check"></i><b>5</b> Leíró statisztika</a>
<ul>
<li class="chapter" data-level="5.1" data-path="leiro-stat.html"><a href="leiro-stat.html#a-szövegek-a-vektortérben"><i class="fa fa-check"></i><b>5.1</b> A szövegek a vektortérben</a></li>
<li class="chapter" data-level="5.2" data-path="leiro-stat.html"><a href="leiro-stat.html#leíró-statisztika"><i class="fa fa-check"></i><b>5.2</b> Leíró statisztika</a></li>
<li class="chapter" data-level="5.3" data-path="leiro-stat.html"><a href="leiro-stat.html#a-szövegek-lexikai-diverzitása"><i class="fa fa-check"></i><b>5.3</b> A szövegek lexikai diverzitása</a></li>
<li class="chapter" data-level="5.4" data-path="leiro-stat.html"><a href="leiro-stat.html#összehasonlításleiro-5"><i class="fa fa-check"></i><b>5.4</b> Összehasonlítás</a></li>
<li class="chapter" data-level="5.5" data-path="leiro-stat.html"><a href="leiro-stat.html#kulcsszavak-kontextusa"><i class="fa fa-check"></i><b>5.5</b> Kulcsszavak kontextusa</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="sentiment.html"><a href="sentiment.html"><i class="fa fa-check"></i><b>6</b> Szótárak és érzelemelemzés</a>
<ul>
<li class="chapter" data-level="6.1" data-path="sentiment.html"><a href="sentiment.html#szótárak-az-r-ben"><i class="fa fa-check"></i><b>6.1</b> Szótárak az R-ben</a></li>
<li class="chapter" data-level="6.2" data-path="sentiment.html"><a href="sentiment.html#magyar-nemzet-elemzése"><i class="fa fa-check"></i><b>6.2</b> <em>Magyar Nemzet</em> elemzése</a></li>
<li class="chapter" data-level="6.3" data-path="sentiment.html"><a href="sentiment.html#mnb-sajtóközlemények"><i class="fa fa-check"></i><b>6.3</b> MNB sajtóközlemények</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="lda-ch.html"><a href="lda-ch.html"><i class="fa fa-check"></i><b>7</b> Felügyelet nélküli tanulás</a>
<ul>
<li class="chapter" data-level="7.1" data-path="lda-ch.html"><a href="lda-ch.html#k-közép-klaszterezés"><i class="fa fa-check"></i><b>7.1</b> K-közép klaszterezés</a></li>
<li class="chapter" data-level="7.2" data-path="lda-ch.html"><a href="lda-ch.html#lda-topik-modelleklda1"><i class="fa fa-check"></i><b>7.2</b> LDA topik modellek</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="lda-ch.html"><a href="lda-ch.html#a-vem-módszer-alkalmazása-a-magyar-törvények-korpuszán"><i class="fa fa-check"></i><b>7.2.1</b> A VEM módszer alkalmazása a magyar törvények korpuszán</a></li>
<li class="chapter" data-level="7.2.2" data-path="lda-ch.html"><a href="lda-ch.html#az-lda-gibbs-módszer-alkalmazása-a-magyar-törvények-korpuszán"><i class="fa fa-check"></i><b>7.2.2</b> Az LDA Gibbs módszer alkalmazása a magyar törvények korpuszán</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="lda-ch.html"><a href="lda-ch.html#strukturális-topik-modellek"><i class="fa fa-check"></i><b>7.3</b> Strukturális topik modellek</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="embedding.html"><a href="embedding.html"><i class="fa fa-check"></i><b>8</b> Szóbeágyazások</a>
<ul>
<li class="chapter" data-level="8.1" data-path="embedding.html"><a href="embedding.html#a-szóbeágyazás-célja"><i class="fa fa-check"></i><b>8.1</b> A szóbeágyazás célja</a></li>
<li class="chapter" data-level="8.2" data-path="embedding.html"><a href="embedding.html#word2vec-és-glove"><i class="fa fa-check"></i><b>8.2</b> Word2Vec és GloVe</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="embedding.html"><a href="embedding.html#glove-használata-magyar-média-korpuszon"><i class="fa fa-check"></i><b>8.2.1</b> GloVe használata magyar média korpuszon</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="scaling.html"><a href="scaling.html"><i class="fa fa-check"></i><b>9</b> Szövegskálázás</a>
<ul>
<li class="chapter" data-level="9.1" data-path="scaling.html"><a href="scaling.html#áttekintés"><i class="fa fa-check"></i><b>9.1</b> Áttekintés</a></li>
<li class="chapter" data-level="9.2" data-path="scaling.html"><a href="scaling.html#wordfish"><i class="fa fa-check"></i><b>9.2</b> Wordfish</a></li>
<li class="chapter" data-level="9.3" data-path="scaling.html"><a href="scaling.html#wordscores"><i class="fa fa-check"></i><b>9.3</b> Wordscores</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="similarity.html"><a href="similarity.html"><i class="fa fa-check"></i><b>10</b> Szövegösszehasonlítás</a>
<ul>
<li class="chapter" data-level="10.1" data-path="similarity.html"><a href="similarity.html#a-szövegösszehasonlítás-különböző-megközelítései"><i class="fa fa-check"></i><b>10.1</b> A szövegösszehasonlítás különböző megközelítései</a></li>
<li class="chapter" data-level="10.2" data-path="similarity.html"><a href="similarity.html#lexikális-hasonlóság"><i class="fa fa-check"></i><b>10.2</b> Lexikális hasonlóság</a></li>
<li class="chapter" data-level="10.3" data-path="similarity.html"><a href="similarity.html#szemantikai-hasonlóság"><i class="fa fa-check"></i><b>10.3</b> Szemantikai hasonlóság</a></li>
<li class="chapter" data-level="10.4" data-path="similarity.html"><a href="similarity.html#hasonlóság-számítás"><i class="fa fa-check"></i><b>10.4</b> Hasonlóság-számítás</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="similarity.html"><a href="similarity.html#adatbázis-importálás-és-előkészítés"><i class="fa fa-check"></i><b>10.4.1</b> Adatbázis importálás és előkészítés</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="similarity.html"><a href="similarity.html#szövegtisztítás"><i class="fa fa-check"></i><b>10.5</b> Szövegtisztítás</a></li>
<li class="chapter" data-level="10.6" data-path="similarity.html"><a href="similarity.html#a-jaccard-hasonlóság-számítás"><i class="fa fa-check"></i><b>10.6</b> A Jaccard hasonlóság számítás</a></li>
<li class="chapter" data-level="10.7" data-path="similarity.html"><a href="similarity.html#a-koszinusz-hasonlóság-számítás"><i class="fa fa-check"></i><b>10.7</b> A Koszinusz hasonlóság számítás</a></li>
<li class="chapter" data-level="10.8" data-path="similarity.html"><a href="similarity.html#az-eredmények-vizualizációja"><i class="fa fa-check"></i><b>10.8</b> Az eredmények vizualizációja</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="nlp-ch.html"><a href="nlp-ch.html"><i class="fa fa-check"></i><b>11</b> NLP és névelemfelismerés</a>
<ul>
<li class="chapter" data-level="11.1" data-path="nlp-ch.html"><a href="nlp-ch.html#a-magyarlanc"><i class="fa fa-check"></i><b>11.1</b> A <code>magyarlanc</code></a></li>
<li class="chapter" data-level="11.2" data-path="nlp-ch.html"><a href="nlp-ch.html#a-szeged-ner"><i class="fa fa-check"></i><b>11.2</b> A <code>szeged ner</code></a></li>
<li class="chapter" data-level="11.3" data-path="nlp-ch.html"><a href="nlp-ch.html#angol-nyelvű-szövegek-névelemfelismerése"><i class="fa fa-check"></i><b>11.3</b> Angol nyelvű szövegek névelemfelismerése</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="osztályozás-és-felügyelt-tanulás.html"><a href="osztályozás-és-felügyelt-tanulás.html"><i class="fa fa-check"></i><b>12</b> Osztályozás és felügyelt tanulás</a>
<ul>
<li class="chapter" data-level="12.1" data-path="osztályozás-és-felügyelt-tanulás.html"><a href="osztályozás-és-felügyelt-tanulás.html#fogalmi-alapok-1"><i class="fa fa-check"></i><b>12.1</b> Fogalmi alapok</a></li>
<li class="chapter" data-level="12.2" data-path="osztályozás-és-felügyelt-tanulás.html"><a href="osztályozás-és-felügyelt-tanulás.html#osztályozás-felügyelt-tanulással"><i class="fa fa-check"></i><b>12.2</b> Osztályozás felügyelt tanulással</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="fuggelek.html"><a href="fuggelek.html"><i class="fa fa-check"></i><b>13</b> Függelék</a>
<ul>
<li class="chapter" data-level="13.1" data-path="fuggelek.html"><a href="fuggelek.html#az-r-és-az-rstudio-használata"><i class="fa fa-check"></i><b>13.1</b> Az R és az RStudio használata</a></li>
<li class="chapter" data-level="13.2" data-path="fuggelek.html"><a href="fuggelek.html#az-rstudio-kezdőfelülete"><i class="fa fa-check"></i><b>13.2</b> Az RStudio kezdőfelülete</a></li>
<li class="chapter" data-level="13.3" data-path="fuggelek.html"><a href="fuggelek.html#projektmunka"><i class="fa fa-check"></i><b>13.3</b> Projekt alapú munka</a></li>
<li class="chapter" data-level="13.4" data-path="fuggelek.html"><a href="fuggelek.html#scriptek-szerkesztése-függvények-használata"><i class="fa fa-check"></i><b>13.4</b> Scriptek szerkesztése, függvények használata</a></li>
<li class="chapter" data-level="13.5" data-path="fuggelek.html"><a href="fuggelek.html#packages"><i class="fa fa-check"></i><b>13.5</b> R csomagok</a></li>
<li class="chapter" data-level="13.6" data-path="fuggelek.html"><a href="fuggelek.html#objektumok-tárolása-értékadás"><i class="fa fa-check"></i><b>13.6</b> Objektumok tárolása, értékadás</a></li>
<li class="chapter" data-level="13.7" data-path="fuggelek.html"><a href="fuggelek.html#vektorok"><i class="fa fa-check"></i><b>13.7</b> Vektorok</a></li>
<li class="chapter" data-level="13.8" data-path="fuggelek.html"><a href="fuggelek.html#faktorok"><i class="fa fa-check"></i><b>13.8</b> Faktorok</a></li>
<li class="chapter" data-level="13.9" data-path="fuggelek.html"><a href="fuggelek.html#data-frame"><i class="fa fa-check"></i><b>13.9</b> Az adattáblák</a></li>
<li class="chapter" data-level="13.10" data-path="fuggelek.html"><a href="fuggelek.html#vizualizáció"><i class="fa fa-check"></i><b>13.10</b> Vizualizáció</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Szövegbányászat és mesterséges intelligencia R-ben</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="sentiment" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Szótárak és érzelemelemzés</h1>
<p>A szentiment- vagy vélemény-, illetve érzelemelemzés a számítógépes nyelvészet részterülete, melynek célja az egyes szövegek tartalmából kinyerni azokat az információkat, amelyek értékelést fejeznek ki.<a href="#fn16" class="footnote-ref" id="fnref16"><sup>16</sup></a> A véleményelemzés a szövegeket három szinten osztályozza. A legáltalánosabb a dokumentumszintű osztályozás, amikor egy hosszabb szövegegység egészét vizsgáljuk, míg a mondatszintű osztályozásnál a vizsgálat alapegysége a mondat. A legrészletesebb adatokat akkor nyerjük, amikor az elemzést target-szinten végezzük, azaz meghatározzuk azt is, hogy egy-egy érzelem a szövegen belül mire vonatkozik. Mindhárom szinten azonos a feladat: egyrészt meg kell állapítani, hogy az adott egységben van-e értékelés, vélemény vagy érzelem, és ha igen, akkor pedig meg kell határozni, hogy milyen azok érzelmi tartalma.</p>
<p>A pozitív-negatív-semleges skálán mozgó szentimentelemzés mellett az elmúlt két évtizedben jelentős lépések történtek a szövegek emóciótartalmának automatikus vizsgálatára is. A módszer hasonló a szentimentelemzéshez, tartalmilag azonban más skálán mozog. Az emócióelemzés esetén ugyanis nem csak azt kell meghatározni, hogy egy kifejezés pozitív vagy negatív töltettel rendelkezik, hanem azt is, hogy milyen érzelmet (öröm, bánat, undor stb.) hordoz. A szótár alapú szentiment- vagy emócióelemzés alapja az az egyszerű ötlet, hogy ha tudjuk, hogy egyes szavak milyen érzelmeket, érzéseket hordoznak, akkor ezeket a szavakat egy szövegben megszámolva képet kaphatunk az adott dokumentum érzelmi tartalmáról. Mivel a szótár alapú elemzés az adott kategórián belüli kulcsszavak gyakoriságán alapul, ezért van, aki nem tekinti statisztikai elemzésnek (lásd például <span class="citation"><a href="fuggelek.html#ref-young2012affective" role="doc-biblioref">Young and Soroka</a> (<a href="fuggelek.html#ref-young2012affective" role="doc-biblioref">2012</a>)</span>).</p>
<p>A tágabb kvantitatív szövegelemzési kontextusban az osztályozáson (<em>classification</em>) belül a felügyelt módszerekhez hasonlóan itt is ismert kategóriákkal dolgozunk, azaz előre meghatározzuk, hogy egy-egy adott szó pozitív vagy negatív tértékű, vagy továbbmenve, milyen érzelmet hordoz, csak egyszerűbb módszertannal <span class="citation">(<a href="fuggelek.html#ref-grimmer2013text" role="doc-biblioref">Grimmer and Stewart 2013</a>)</span>. A kulcsszavakra építés miatt a módszer a kvalitatív és a kvantitatív kutatási vonalak találkozásának is tekinthető, hiszen egy-egy szónak az érzelmi töltete nem mindig ítélhető meg objektíven. Mint minden módszer esetében, itt is kiemelten fontos ellenőrni, hogy a használt szótár kategóriák és kulcsszavak fedik-e a valóságot. Más szavakkal: <em>validate, validate, validate</em>.</p>
<p><strong>A módszer előnyei:</strong></p>
<ul>
<li>Tökéletesen megbízható: a számításoknak nincs probabilisztikus (azaz valószínűségre épülő) eleme, mint például a Support Vector alapú osztályozásnak, illetve az emberi szövegkódolásnál előforduló problémákat is elkerüljük (például azt, hogy két kódoló, vagy ugyanazon kódoló két különböző időpontban nem azonosan értékeli ugyanazt a kifejezést).</li>
<li>Általa képesek vagyunk mérni a szöveg látens dimenzióit.</li>
<li>Széles körben alkalmazható, egyszerűen számolható. A politikatudományon és a számítógépes nyelvészeten belül nagyon sok kész szótár elérhető, amelyek különböző módszerekkel készültek és különböző területet fednek le (például populizmus, pártprogramok policy tartalma, érzelmek, gazdasági tartalom).</li>
<li>Relatíve könnyen adaptálható egyik nyelvi környezetből a másikba, bár szótárfordítások esetén külön hangsúlyt kell fektetni a validálásra.<a href="#fn17" class="footnote-ref" id="fnref17"><sup>17</sup></a></li>
</ul>
<p><strong>A módszer lehetséges hátrányai:</strong></p>
<ul>
<li>A szótár hatékonysága és validitása azon múlik, hogy mennyire egyezik a szótár és a vizsgálni kívánt dokumentum területe. Nem mindegy például, hogy a szótárunkkal tőzsdei jelentések alapján a gazdasági bizonytalanságot vagy nézők filmekre adott értékeléseit szeretnénk-e vizsgálni. Léteznek általános szentimentszótárak, ezek hatékonysága azonban általában alulmúlja a terület-specifikus szótárakét.</li>
<li>A terület-specifikus szótár építése kvalitatív folyamat, éppen ezért idő- és emberi erőforrás igényes.</li>
<li>A szózsák alapú elemzéseknél a kontextus elvész. Gondoljunk például a tagadásra: a „nem vagyok boldog” kifejezés esetén egy általános szentiment szótár a tagadás miatt félreosztályozná a mondat érzelmi töltését, hiszen a boldog szó önmagában a pozitív kategóriába tartozik. Természetesen az automatikus tagadás kezelésére is vannak lehetőségek, de a kérdés komplexitása miatt ezek bemutatásától most eltekintünk.</li>
</ul>
<p>A legnagyobb méretű általános szentimentszótár az angol nyelvű SentiWordNet (SWN), ami kb. 150 000 szót tartalmaz, amelyek mindegyike a három szentimentérték – pozitív, negatív, semleges – közül kapott egyet.<a href="#fn18" class="footnote-ref" id="fnref18"><sup>18</sup></a><span class="citation">(<a href="fuggelek.html#ref-baccianellaSentiwordnetEnhancedLexical2010" role="doc-biblioref">Baccianella, Esuli, and Sebastiani 2010</a>)</span></p>
<p>Az R-ben végzett szentimentelemzés során az angol nyelvű szövegekhez több beépített általános szentimentszótár is a rendelkezésünkre áll.<a href="#fn19" class="footnote-ref" id="fnref19"><sup>19</sup></a> A teljesség igénye nélkül említhetjük az AFINN,<a href="#fn20" class="footnote-ref" id="fnref20"><sup>20</sup></a> a bing<a href="#fn21" class="footnote-ref" id="fnref21"><sup>21</sup></a> és a az nrc<a href="#fn22" class="footnote-ref" id="fnref22"><sup>22</sup></a> szótárakat. Az elemzés sikere több faktortól is függ. Fontos, hogy a korpuszban lévő dokumentumokat körültekintően tisztítsuk meg az elemzés elején (lásd a <em><a href="corpus-ch.html#corpus_ch">Korpuszépítés és előkészítés fejezetet</a></em>). A következő lépésben meg kell bizonyosodnunk arról, hogy a kiválasztott szentiment szótár alkalmazható a korpuszunkra. Amennyiben nem találunk alkalmas szótárt, akkor a saját szótár validálására kell figyelni. A negyedik fejezetben leírtak itt is érvényesek, a dokumentum-kifejezés mátrixot érdemes valamilyen módon súlyozni.</p>
<div id="szótárak-az-r-ben" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Szótárak az R-ben</h2>
<p>A szótár alapú elemzéshez a <code>quanteda</code> csomagot fogjuk használni, illetve a 3. fejezetben már megismert <code>readr</code>, <code>stringr</code>, <code>dplyr</code> tidyverse csomagokat.<a href="#fn23" class="footnote-ref" id="fnref23"><sup>23</sup></a></p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="sentiment.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb72-2"><a href="sentiment.html#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb72-3"><a href="sentiment.html#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb72-4"><a href="sentiment.html#cb72-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb72-5"><a href="sentiment.html#cb72-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(HunMineR)</span></code></pre></div>
<p>Mielőtt két esettanulmányt bemutatnánk, vizsgáljuk meg, hogyan néz ki egy szentimentszótár az R-ben. A szótárt kézzel úgy tudjuk készíthetünk, hogy egy listán belül létrehozzuk karaktervektorként a kategóriákat és a kulcsszavakat, és ezt a listát a <code>quanteda</code> <code>dictionary</code> függvényével eltároljuk.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="sentiment.html#cb73-1" aria-hidden="true" tabindex="-1"></a>szentiment_szotar <span class="ot">&lt;-</span> <span class="fu">dictionary</span>(</span>
<span id="cb73-2"><a href="sentiment.html#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb73-3"><a href="sentiment.html#cb73-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">pozitiv =</span> <span class="fu">c</span>(<span class="st">&quot;jó&quot;</span>, <span class="st">&quot;boldog&quot;</span>, <span class="st">&quot;öröm&quot;</span>),</span>
<span id="cb73-4"><a href="sentiment.html#cb73-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">negativ =</span> <span class="fu">c</span>(<span class="st">&quot;rossz&quot;</span>, <span class="st">&quot;szomorú&quot;</span>, <span class="st">&quot;lehangoló&quot;</span>)</span>
<span id="cb73-5"><a href="sentiment.html#cb73-5" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb73-6"><a href="sentiment.html#cb73-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb73-7"><a href="sentiment.html#cb73-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-8"><a href="sentiment.html#cb73-8" aria-hidden="true" tabindex="-1"></a>szentiment_szotar</span>
<span id="cb73-9"><a href="sentiment.html#cb73-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Dictionary object with 2 key entries.</span></span>
<span id="cb73-10"><a href="sentiment.html#cb73-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; - [pozitiv]:</span></span>
<span id="cb73-11"><a href="sentiment.html#cb73-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   - jó, boldog, öröm</span></span>
<span id="cb73-12"><a href="sentiment.html#cb73-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; - [negativ]:</span></span>
<span id="cb73-13"><a href="sentiment.html#cb73-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   - rossz, szomorú, lehangoló</span></span></code></pre></div>
<p>A <code>quanteda</code>, <code>quanteda.corpora</code> és <code>tidytext</code> R csomagok több széles körben használt szentiment szótárat tartalmaznak, így nem kell kézzel replikálni minden egyes szótárat, amit használni szeretnénk.</p>
<p>A szentiment elemzési munkafolyamat, amit ebben a részfejezetben bemutatunk, a következő lépésekből áll:</p>
<ol style="list-style-type: decimal">
<li>dokumentumok betöltése,</li>
<li>szöveg előkészítése,</li>
<li>a korpusz létrehozása,</li>
<li>dokumentum-kifejezés mátrix létrehozása,</li>
<li>szótár betöltése,</li>
<li>a dokumentum-kifejezés mátrix szűrése a szótárban lévő kulcsszavakkal,</li>
<li>az eredmény vizualizálása, további felhasználása.</li>
</ol>
<p>A fejezetben két különböző korpuszt fogunk elemezni: a 2006-os <em>Magyar Nemzet</em> címlapjainak egy 252 cikkből álló mintáját vizsgáljuk egy magyar szentiment szótárral.<a href="#fn24" class="footnote-ref" id="fnref24"><sup>24</sup></a> A második korpusz a Magyar Nemzeti Bank angol nyelvű sajtóközleményeiből áll, amin egy széles körben használt gazdasági szótár használatát mutatjuk be.<a href="#fn25" class="footnote-ref" id="fnref25"><sup>25</sup></a></p>
</div>
<div id="magyar-nemzet-elemzése" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> <em>Magyar Nemzet</em> elemzése</h2>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="sentiment.html#cb74-1" aria-hidden="true" tabindex="-1"></a>mn_minta <span class="ot">&lt;-</span> HunMineR<span class="sc">::</span>data_magyar_nemzet_small</span>
<span id="cb74-2"><a href="sentiment.html#cb74-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-3"><a href="sentiment.html#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mn_minta)</span>
<span id="cb74-4"><a href="sentiment.html#cb74-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      doc_id           text              doc_date         </span></span>
<span id="cb74-5"><a href="sentiment.html#cb74-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Min.   :   1.0   Length:2834        Min.   :2006-01-02  </span></span>
<span id="cb74-6"><a href="sentiment.html#cb74-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1st Qu.: 709.2   Class :character   1st Qu.:2006-03-29  </span></span>
<span id="cb74-7"><a href="sentiment.html#cb74-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Median :1417.5   Mode  :character   Median :2006-06-28  </span></span>
<span id="cb74-8"><a href="sentiment.html#cb74-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Mean   :1417.5                      Mean   :2006-06-28  </span></span>
<span id="cb74-9"><a href="sentiment.html#cb74-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3rd Qu.:2125.8                      3rd Qu.:2006-09-26  </span></span>
<span id="cb74-10"><a href="sentiment.html#cb74-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Max.   :2834.0                      Max.   :2006-12-29</span></span></code></pre></div>
<p>A <code>HunMineR</code> csomag segítségével beolvassuk a <em>Magyar Nemzet</em> adatbázis egy kisebb részét, ami az esetünkben a 2006-os címlapokon szereplő híreket jelenti. A <code>summary()</code> parancs, ahogy a neve is mutatja, gyors áttekintést nyújt a betöltött adatbázisról. Látjuk, hogy 2834 sorból (megfigyelés) és 3 oszlopból (változó) áll. Első ránézésre látszik, hogy a text változónk tartalmazza a szövegeket, és hogy azok tisztításra szorulnak.</p>
<p>Az első szöveget megnézve látjuk, hogy a standard előkészítési lépések mellett a sortörést (<code>\n</code>) is ki kell törölnünk.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="sentiment.html#cb75-1" aria-hidden="true" tabindex="-1"></a>mn_minta<span class="sc">$</span>text[<span class="dv">1</span>]</span>
<span id="cb75-2"><a href="sentiment.html#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Hat fovárosi képviselo öt percnél is kevesebbet beszélt egy év alatt a közgyulésben.\n\n\n\n\n\n\n\n\n\n\n&quot;</span></span></code></pre></div>
<p>Habár a <code>quanteda</code> is lehetőséget ad néhány előkészítő lépésre, érdemes ezt olyan céleszközzel tenni, ami nagyobb rugalmasságot ad a kezünkbe. Mi erre a célra a <code>stringr</code> csomagot használjuk. Első lépésben kitöröljük a sortöréseket (<code>\n</code>), a központozást, a számokat és kisbetűsítünk minden szót. Előfordulhat, hogy (számunkra nehezen látható) extra szóközök maradnak a szövegben. Ezeket az <code>str_squish()</code>függvénnyel tüntetjük el. A szöveg eleji és végi extra szóközöket (<em>leading vagy trailing white space</em>) az <code>str_trim()</code> függvény vágja le.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="sentiment.html#cb76-1" aria-hidden="true" tabindex="-1"></a>mn_tiszta <span class="ot">&lt;-</span> mn_minta <span class="sc">%&gt;%</span></span>
<span id="cb76-2"><a href="sentiment.html#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb76-3"><a href="sentiment.html#cb76-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> <span class="fu">str_remove_all</span>(<span class="at">string =</span> text, <span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>),</span>
<span id="cb76-4"><a href="sentiment.html#cb76-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> <span class="fu">str_remove_all</span>(<span class="at">string =</span> text, <span class="at">pattern =</span> <span class="st">&quot;[:punct:]&quot;</span>),</span>
<span id="cb76-5"><a href="sentiment.html#cb76-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> <span class="fu">str_remove_all</span>(<span class="at">string =</span> text, <span class="at">pattern =</span> <span class="st">&quot;[:digit:]&quot;</span>),</span>
<span id="cb76-6"><a href="sentiment.html#cb76-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> <span class="fu">str_to_lower</span>(text),</span>
<span id="cb76-7"><a href="sentiment.html#cb76-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> <span class="fu">str_trim</span>(text),</span>
<span id="cb76-8"><a href="sentiment.html#cb76-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> <span class="fu">str_squish</span>(text)</span>
<span id="cb76-9"><a href="sentiment.html#cb76-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p>A szöveg sokkal jobban néz ki, habár észrevehetjük, hogy maradhattak benne problémás részek, főleg a sortörés miatt, ami sajnos hol egyes szavak közepén van (a jobbik eset), vagy pedig pont szóhatáron, ez esetben a két szó sajnos összevonódik. Az egyszerűség kedvéért feltételezzük, hogy ez kellően ritkán fordul elő ahhoz, hogy ne befolyásolja az elemzésünk eredményét.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="sentiment.html#cb77-1" aria-hidden="true" tabindex="-1"></a>mn_tiszta<span class="sc">$</span>text[<span class="dv">1</span>]</span>
<span id="cb77-2"><a href="sentiment.html#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;hat fovárosi képviselo öt percnél is kevesebbet beszélt egy év alatt a közgyulésben&quot;</span></span></code></pre></div>
<p>Miután kész a tisztá(bb) szövegünk, korpuszt hozunk létre a quanteda <code>corpus()</code> függvényével. A corpus objektum a szöveg mellett egyéb dokumentum meta adatokat is tud tárolni (dátum, író, hely, stb.) Ezeket mi is hozzáadhatjuk (erre majd látunk példát), illetve amikor létrehozzuk a korpuszt a data frame-ünkből, automatikusan metaadatokként tárolódnak az változóink. Jelen esetben az egyetlen dokumentum változónk a szöveg mellett a dátum lesz. A korpusz dokumentum változóihoz a <code>docvars()</code> függvény segítségével tudunk hozzáférni.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="sentiment.html#cb78-1" aria-hidden="true" tabindex="-1"></a>mn_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(mn_tiszta)</span>
<span id="cb78-2"><a href="sentiment.html#cb78-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-3"><a href="sentiment.html#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">docvars</span>(mn_corpus), <span class="dv">5</span>)</span>
<span id="cb78-4"><a href="sentiment.html#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     doc_date</span></span>
<span id="cb78-5"><a href="sentiment.html#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 2006-01-02</span></span>
<span id="cb78-6"><a href="sentiment.html#cb78-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 2006-01-02</span></span>
<span id="cb78-7"><a href="sentiment.html#cb78-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 2006-01-02</span></span>
<span id="cb78-8"><a href="sentiment.html#cb78-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 2006-01-02</span></span>
<span id="cb78-9"><a href="sentiment.html#cb78-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 2006-01-02</span></span></code></pre></div>
<p>A következő lépés a dokumentum-kifejezés mátrix létrehozása a <code>dfm()</code> függvénnyel. Először tokenekre bontjuk a szövegeket a <code>tokens()</code>paranccsal, és aztán ezt a tokenizált szózsákot kapja meg a dfm inputnak. A sor a végén a létrehozott mátrixunkat TF-IDF módszerrel súlyozzuk a <code>dfm_tfidf()</code> függvény használatával.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="sentiment.html#cb79-1" aria-hidden="true" tabindex="-1"></a>mn_dfm <span class="ot">&lt;-</span> mn_corpus <span class="sc">%&gt;%</span></span>
<span id="cb79-2"><a href="sentiment.html#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens</span>(<span class="at">what =</span> <span class="st">&quot;word&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb79-3"><a href="sentiment.html#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span></span>
<span id="cb79-4"><a href="sentiment.html#cb79-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_tfidf</span>()</span></code></pre></div>
<p>A cikkek szentimentjét egy magyar szótárral fogjuk becsülni, amit a Társadalomtudományi Kutatóközpont kutatói a Mesterséges Intelligencia Nemzeti Laboratórium projekt keretében készítettek.<a href="#fn26" class="footnote-ref" id="fnref26"><sup>26</sup></a> Két dimenziót tarlamaz (pozitív és negatív), 2614 pozitív és 2654 negatív kulcsszóval. Ez nem számít kirívóan nagynak a szótárak között, mivel az adott kategóriák minél teljesebb lefedése a cél.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="sentiment.html#cb80-1" aria-hidden="true" tabindex="-1"></a>poltext_szotar <span class="ot">&lt;-</span> HunMineR<span class="sc">::</span>dictionary_poltext</span>
<span id="cb80-2"><a href="sentiment.html#cb80-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-3"><a href="sentiment.html#cb80-3" aria-hidden="true" tabindex="-1"></a>poltext_szotar</span>
<span id="cb80-4"><a href="sentiment.html#cb80-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Dictionary object with 2 key entries.</span></span>
<span id="cb80-5"><a href="sentiment.html#cb80-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; - [positive]:</span></span>
<span id="cb80-6"><a href="sentiment.html#cb80-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   - abszolút, ad, adaptív, adekvát, adócsökkentés, adókedvezmény, adomány, adományoz, adóreform, adottság, adottságú, áfacsökkentés, agilis, agytröszt, áhított, ajándék, ajándékoz, ajánl, ajánlott, akadálytalan [ ... and 2,279 more ]</span></span>
<span id="cb80-7"><a href="sentiment.html#cb80-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; - [negative]:</span></span>
<span id="cb80-8"><a href="sentiment.html#cb80-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   - aberrált, abnormális, abnormalitás, abszurd, abszurditás, ádáz, adócsalás, adócsaló, adós, adósság, áfacsalás, áfacsaló, affér, aggasztó, aggodalom, aggódik, aggódás, agresszió, agresszíven, agresszivitás [ ... and 2,568 more ]</span></span></code></pre></div>
<p>Az egyes dokumentumok szentimentjét a <code>dfm_lookup()</code> becsüli, ahol az előző lépésben létrehozott súlyozott dfm az input és a magyar szentimentszótár a dictionary. Egy gyors pillantás az eredményre és látjuk hogy minden dokumentumhoz készült egy pozitív és egy negatív érték. A TF-IDF súlyozás miatt nem látunk egész számokat (a súlyozás nélkül a sima szófrekvenciát kapnánk).</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="sentiment.html#cb81-1" aria-hidden="true" tabindex="-1"></a>mn_szentiment <span class="ot">&lt;-</span> <span class="fu">dfm_lookup</span>(mn_dfm, <span class="at">dictionary =</span> poltext_szotar)</span>
<span id="cb81-2"><a href="sentiment.html#cb81-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-3"><a href="sentiment.html#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mn_szentiment, <span class="dv">5</span>)</span>
<span id="cb81-4"><a href="sentiment.html#cb81-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Document-feature matrix of: 5 documents, 2 features (40.0% sparse) and 1 docvar.</span></span>
<span id="cb81-5"><a href="sentiment.html#cb81-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     features</span></span>
<span id="cb81-6"><a href="sentiment.html#cb81-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; docs   positive  negative</span></span>
<span id="cb81-7"><a href="sentiment.html#cb81-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    1  0          0       </span></span>
<span id="cb81-8"><a href="sentiment.html#cb81-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    2  0.8375026 12.497973</span></span>
<span id="cb81-9"><a href="sentiment.html#cb81-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    3  0          0       </span></span>
<span id="cb81-10"><a href="sentiment.html#cb81-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    4 21.1044299  6.449036</span></span>
<span id="cb81-11"><a href="sentiment.html#cb81-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    5 11.0358129  8.131890</span></span></code></pre></div>
<p>Ahhoz, hogy fel tudjuk használni a kapott eredményt, érdemes dokumentumváltozóként eltárolni a korpuszban. Ezt a fent már használt <code>docvars()</code> függvény segítségével tudjuk megtenni, ahol a második argumentumkét az új változó nevét adjuk meg.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="sentiment.html#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">docvars</span>(mn_corpus, <span class="st">&quot;pos&quot;</span>) <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(mn_szentiment[, <span class="dv">1</span>])</span>
<span id="cb82-2"><a href="sentiment.html#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="fu">docvars</span>(mn_corpus, <span class="st">&quot;neg&quot;</span>) <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(mn_szentiment[, <span class="dv">2</span>])</span>
<span id="cb82-3"><a href="sentiment.html#cb82-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-4"><a href="sentiment.html#cb82-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">docvars</span>(mn_corpus), <span class="dv">5</span>)</span>
<span id="cb82-5"><a href="sentiment.html#cb82-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     doc_date        pos       neg</span></span>
<span id="cb82-6"><a href="sentiment.html#cb82-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 2006-01-02  0.0000000  0.000000</span></span>
<span id="cb82-7"><a href="sentiment.html#cb82-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 2006-01-02  0.8375026 12.497973</span></span>
<span id="cb82-8"><a href="sentiment.html#cb82-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 2006-01-02  0.0000000  0.000000</span></span>
<span id="cb82-9"><a href="sentiment.html#cb82-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 2006-01-02 21.1044299  6.449036</span></span>
<span id="cb82-10"><a href="sentiment.html#cb82-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 2006-01-02 11.0358129  8.131890</span></span></code></pre></div>
<p>Végül a kapott korpuszt a kiszámolt szentimentértékekkel a <code>quanteda</code>-ban lévő <code>convert()</code> függvénnyel adattáblává alakítjuk. A<code>convert()</code> függvény dokumentációját érdemes elolvasni, mert ennek segítségével tudjuk a <code>quanteda</code>-ban elkészült objektumainkat átalakítani úgy, hogy azt más csomagok is tudják használni.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="sentiment.html#cb83-1" aria-hidden="true" tabindex="-1"></a>mn_df <span class="ot">&lt;-</span> <span class="fu">convert</span>(mn_corpus, <span class="at">to =</span> <span class="st">&quot;data.frame&quot;</span>)</span>
<span id="cb83-2"><a href="sentiment.html#cb83-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-3"><a href="sentiment.html#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mn_df)</span>
<span id="cb83-4"><a href="sentiment.html#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     doc_id              text              doc_date               pos        </span></span>
<span id="cb83-5"><a href="sentiment.html#cb83-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Length:2834        Length:2834        Min.   :2006-01-02   Min.   : 0.000  </span></span>
<span id="cb83-6"><a href="sentiment.html#cb83-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Class :character   Class :character   1st Qu.:2006-03-29   1st Qu.: 0.000  </span></span>
<span id="cb83-7"><a href="sentiment.html#cb83-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Mode  :character   Mode  :character   Median :2006-06-28   Median : 2.373  </span></span>
<span id="cb83-8"><a href="sentiment.html#cb83-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                        Mean   :2006-06-28   Mean   : 4.074  </span></span>
<span id="cb83-9"><a href="sentiment.html#cb83-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                        3rd Qu.:2006-09-26   3rd Qu.: 6.280  </span></span>
<span id="cb83-10"><a href="sentiment.html#cb83-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;                                        Max.   :2006-12-29   Max.   :35.648  </span></span>
<span id="cb83-11"><a href="sentiment.html#cb83-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       neg        </span></span>
<span id="cb83-12"><a href="sentiment.html#cb83-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Min.   : 0.000  </span></span>
<span id="cb83-13"><a href="sentiment.html#cb83-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1st Qu.: 0.000  </span></span>
<span id="cb83-14"><a href="sentiment.html#cb83-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Median : 2.037  </span></span>
<span id="cb83-15"><a href="sentiment.html#cb83-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Mean   : 3.528  </span></span>
<span id="cb83-16"><a href="sentiment.html#cb83-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3rd Qu.: 5.348  </span></span>
<span id="cb83-17"><a href="sentiment.html#cb83-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Max.   :39.096</span></span></code></pre></div>
<p>Mielőtt vizualizálnánk az eredményt érdemes a napi szintre aggregálni a szentimentértéket és egy nettó értéket kalkulálni.<a href="#fn27" class="footnote-ref" id="fnref27"><sup>27</sup></a></p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="sentiment.html#cb84-1" aria-hidden="true" tabindex="-1"></a>mn_df <span class="ot">&lt;-</span> mn_df <span class="sc">%&gt;%</span></span>
<span id="cb84-2"><a href="sentiment.html#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(doc_date) <span class="sc">%&gt;%</span></span>
<span id="cb84-3"><a href="sentiment.html#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb84-4"><a href="sentiment.html#cb84-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">daily_pos =</span> <span class="fu">sum</span>(pos),</span>
<span id="cb84-5"><a href="sentiment.html#cb84-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">daily_neg =</span> <span class="fu">sum</span>(neg),</span>
<span id="cb84-6"><a href="sentiment.html#cb84-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">net_daily =</span> daily_pos <span class="sc">-</span> daily_neg</span>
<span id="cb84-7"><a href="sentiment.html#cb84-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p>A plot alapján a cikkek érzelemelemzése során több kiugrást is tapasztalhatunk. Természetesen messzemenő következtetéseket egy ilyen kis korpusz alapján nem vonhatunk le, de a kiugrásokhoz tartozó cikkek kvalitatív vizsgálatával megállapíthatjuk, hogy az áprilisi kiugrást a választásokhoz kötődő cikkek pozitív hangulata, míg az októberi negatív kilengést az öszödi beszéd nyilvánosságra kerüléséhez köthető cikkek negatív szentimentje okozza.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="sentiment.html#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mn_df, <span class="fu">aes</span>(doc_date, net_daily)) <span class="sc">+</span> <span class="fu">geom_line</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">&quot;Szentiment&quot;</span>, <span class="at">x =</span> <span class="cn">NULL</span>, </span>
<span id="cb85-2"><a href="sentiment.html#cb85-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Adatforrás: https://cap.tk.hu/&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-94"></span>
<p class="caption">
Figure 6.1: Magyar Nemzet címlap szentimentje
</p>
<img src="_main_files/figure-html/unnamed-chunk-94-1.png" alt="Magyar Nemzet címlap szentimentje" width="90%" />
</div>
</div>
<div id="mnb-sajtóközlemények" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> MNB sajtóközlemények</h2>
<p>A második esettanulmányban a kontextuális szótárelemzést mutatjuk be egy angol nyelvű korpusz és specializált szótár segítségével. A korpusz, az MNB kamatdöntéseit kísérő nemzetközi sajtóközleményei, a szótár pedig a <span class="citation"><a href="fuggelek.html#ref-loughranWhenLiabilityNot2011" role="doc-biblioref">Loughran and McDonald</a> (<a href="fuggelek.html#ref-loughranWhenLiabilityNot2011" role="doc-biblioref">2011</a>)</span> pénzügyi szentimentszótár.<a href="#fn28" class="footnote-ref" id="fnref28"><sup>28</sup></a></p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="sentiment.html#cb86-1" aria-hidden="true" tabindex="-1"></a>penzugy_szentiment <span class="ot">&lt;-</span> HunMineR<span class="sc">::</span>dictionary_LoughranMcDonald</span></code></pre></div>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="sentiment.html#cb87-1" aria-hidden="true" tabindex="-1"></a>penzugy_szentiment</span>
<span id="cb87-2"><a href="sentiment.html#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Dictionary object with 9 key entries.</span></span>
<span id="cb87-3"><a href="sentiment.html#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; - [NEGATIVE]:</span></span>
<span id="cb87-4"><a href="sentiment.html#cb87-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   - abandon, abandoned, abandoning, abandonment, abandonments, abandons, abdicated, abdicates, abdicating, abdication, abdications, aberrant, aberration, aberrational, aberrations, abetting, abnormal, abnormalities, abnormality, abnormally [ ... and 2,335 more ]</span></span>
<span id="cb87-5"><a href="sentiment.html#cb87-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; - [POSITIVE]:</span></span>
<span id="cb87-6"><a href="sentiment.html#cb87-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   - able, abundance, abundant, acclaimed, accomplish, accomplished, accomplishes, accomplishing, accomplishment, accomplishments, achieve, achieved, achievement, achievements, achieves, achieving, adequately, advancement, advancements, advances [ ... and 334 more ]</span></span>
<span id="cb87-7"><a href="sentiment.html#cb87-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; - [UNCERTAINTY]:</span></span>
<span id="cb87-8"><a href="sentiment.html#cb87-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   - abeyance, abeyances, almost, alteration, alterations, ambiguities, ambiguity, ambiguous, anomalies, anomalous, anomalously, anomaly, anticipate, anticipated, anticipates, anticipating, anticipation, anticipations, apparent, apparently [ ... and 277 more ]</span></span>
<span id="cb87-9"><a href="sentiment.html#cb87-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; - [LITIGIOUS]:</span></span>
<span id="cb87-10"><a href="sentiment.html#cb87-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   - abovementioned, abrogate, abrogated, abrogates, abrogating, abrogation, abrogations, absolve, absolved, absolves, absolving, accession, accessions, acquirees, acquirors, acquit, acquits, acquittal, acquittals, acquittance [ ... and 883 more ]</span></span>
<span id="cb87-11"><a href="sentiment.html#cb87-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; - [CONSTRAINING]:</span></span>
<span id="cb87-12"><a href="sentiment.html#cb87-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   - abide, abiding, bound, bounded, commit, commitment, commitments, commits, committed, committing, compel, compelled, compelling, compels, comply, compulsion, compulsory, confine, confined, confinement [ ... and 164 more ]</span></span>
<span id="cb87-13"><a href="sentiment.html#cb87-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; - [SUPERFLUOUS]:</span></span>
<span id="cb87-14"><a href="sentiment.html#cb87-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   - aegis, amorphous, anticipatory, appertaining, assimilate, assimilating, assimilation, bifurcated, bifurcation, cessions, cognizable, concomitant, correlative, deconsolidation, delineation, demonstrable, demonstrably, derecognized, derecognizes, derivatively [ ... and 36 more ]</span></span>
<span id="cb87-15"><a href="sentiment.html#cb87-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [ reached max_nkey ... 3 more keys ]</span></span></code></pre></div>
<p>A szentimentszótár 9 kategóriából áll. A legtöbb kulcsszó a negatív dimenzióhoz van (2355).</p>
<p>A munkamenet hasonló a <em>Magyar Nemzet</em>-es példához:</p>
<ol style="list-style-type: decimal">
<li>adat betöltés,</li>
<li>szövegtisztítás,</li>
<li>korpusz létrehozás,</li>
<li>tokenizálás,</li>
<li>kulcs kontextuális tokenek szűrése,</li>
<li>dfm előállítás és szentiment számítás,</li>
<li>az eredmény vizualizálása, további felhasználása.</li>
</ol>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="sentiment.html#cb88-1" aria-hidden="true" tabindex="-1"></a>mnb_pr <span class="ot">&lt;-</span> HunMineR<span class="sc">::</span>data_mnb_pr</span>
<span id="cb88-2"><a href="sentiment.html#cb88-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-3"><a href="sentiment.html#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mnb_pr)</span>
<span id="cb88-4"><a href="sentiment.html#cb88-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       date                text                 id              year     </span></span>
<span id="cb88-5"><a href="sentiment.html#cb88-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Min.   :2005-01-24   Length:180         Min.   :  1.00   Min.   :2005  </span></span>
<span id="cb88-6"><a href="sentiment.html#cb88-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1st Qu.:2008-10-14   Class :character   1st Qu.: 45.75   1st Qu.:2008  </span></span>
<span id="cb88-7"><a href="sentiment.html#cb88-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Median :2012-07-10   Mode  :character   Median : 90.50   Median :2012  </span></span>
<span id="cb88-8"><a href="sentiment.html#cb88-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Mean   :2012-07-08                      Mean   : 90.50   Mean   :2012  </span></span>
<span id="cb88-9"><a href="sentiment.html#cb88-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3rd Qu.:2016-03-30                      3rd Qu.:135.25   3rd Qu.:2016  </span></span>
<span id="cb88-10"><a href="sentiment.html#cb88-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  Max.   :2019-12-17                      Max.   :180.00   Max.   :2019</span></span></code></pre></div>
<p>Adatbázisunk 180 megfigyelésből és 4 változóból áll. Az egyetlen lényeges dokumentum metaadat itt is a szövegek megjelenési ideje.</p>
<p>A szövegeket ugyanazokkal a standard eszközökkel kezeljük, mint a <em>Magyar Nemzet</em> esetében. Érdemes minden esetben ellenőrizni, hogy az R-kód, amit használunk, tényleg azt csinálja-e, amit szeretnénk. Ez hatványozottan igaz abban az esetben, amikor szövegekkel és reguláris kifejezésekkel dolgozunk.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="sentiment.html#cb89-1" aria-hidden="true" tabindex="-1"></a>mnb_tiszta <span class="ot">&lt;-</span> mnb_pr <span class="sc">%&gt;%</span></span>
<span id="cb89-2"><a href="sentiment.html#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb89-3"><a href="sentiment.html#cb89-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> <span class="fu">str_remove_all</span>(<span class="at">string =</span> text, <span class="at">pattern =</span> <span class="st">&quot;[:cntrl:]&quot;</span>),</span>
<span id="cb89-4"><a href="sentiment.html#cb89-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> <span class="fu">str_remove_all</span>(<span class="at">string =</span> text, <span class="at">pattern =</span> <span class="st">&quot;[:punct:]&quot;</span>),</span>
<span id="cb89-5"><a href="sentiment.html#cb89-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> <span class="fu">str_remove_all</span>(<span class="at">string =</span> text, <span class="at">pattern =</span> <span class="st">&quot;[:digit:]&quot;</span>),</span>
<span id="cb89-6"><a href="sentiment.html#cb89-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> <span class="fu">str_to_lower</span>(text),</span>
<span id="cb89-7"><a href="sentiment.html#cb89-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> <span class="fu">str_trim</span>(text),</span>
<span id="cb89-8"><a href="sentiment.html#cb89-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">text =</span> <span class="fu">str_squish</span>(text)</span>
<span id="cb89-9"><a href="sentiment.html#cb89-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p>Miután rendelkezésre állnak a tiszta dokumentumaink, egy karaktervektorba gyűjtjük azokat a kulcsszavakat, amelyek környékén szeretnénk megfigyelni a szentiment alakulását. A példa kedvéért mi az <code>unemp*</code>, <code>growth</code>, <code>gdp</code>, <code>inflation*</code> szótöveket és szavakat választottuk. A <code>tokens_keep()</code> megtartja a kulcsszavainkat és egy általunk megadott +/- n tokenes környezetüket (jelen esetben 10). A szentimentelemzést pedig már ezen a jóval kisebb mátrixon fogjuk lefuttatni. A <code>phrase()</code> segítségével több szóból álló kifejezéséket is vizsgálhatunk. Ilyen szókapcsolat például az „Európai Unió" is, ahol lényeges, hogy egyben kezeljük a két szót.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="sentiment.html#cb90-1" aria-hidden="true" tabindex="-1"></a>mnb_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(mnb_tiszta)</span>
<span id="cb90-2"><a href="sentiment.html#cb90-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-3"><a href="sentiment.html#cb90-3" aria-hidden="true" tabindex="-1"></a>gazdasag <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;unemp*&quot;</span>, <span class="st">&quot;growth&quot;</span>, <span class="st">&quot;gdp&quot;</span>, <span class="st">&quot;inflation*&quot;</span>, <span class="st">&quot;inflation expectation*&quot;</span>)</span>
<span id="cb90-4"><a href="sentiment.html#cb90-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-5"><a href="sentiment.html#cb90-5" aria-hidden="true" tabindex="-1"></a>mnb_token <span class="ot">&lt;-</span> <span class="fu">tokens</span>(mnb_corpus) <span class="sc">%&gt;%</span></span>
<span id="cb90-6"><a href="sentiment.html#cb90-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_keep</span>(<span class="at">pattern =</span> <span class="fu">phrase</span>(gazdasag), <span class="at">window =</span> <span class="dv">10</span>)</span></code></pre></div>
<p>A szentimentet most is egy súlyozott dfm-ből számoljuk. A kész eredményt hozzáadjuk a korpuszhoz, majd adattáblát hozunk létre belőle. A 9 kategóriából 5-öt használunk csak, amelyeknek jegybanki környezetben értelmezhető tartalma van.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="sentiment.html#cb91-1" aria-hidden="true" tabindex="-1"></a>mnb_szentiment <span class="ot">&lt;-</span> <span class="fu">tokens_lookup</span>(mnb_token, <span class="at">dictionary =</span> penzugy_szentiment) <span class="sc">%&gt;%</span></span>
<span id="cb91-2"><a href="sentiment.html#cb91-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span></span>
<span id="cb91-3"><a href="sentiment.html#cb91-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_tfidf</span>()</span>
<span id="cb91-4"><a href="sentiment.html#cb91-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-5"><a href="sentiment.html#cb91-5" aria-hidden="true" tabindex="-1"></a><span class="fu">docvars</span>(mnb_corpus, <span class="st">&quot;negative&quot;</span>) <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(mnb_szentiment[, <span class="st">&quot;negative&quot;</span>])</span>
<span id="cb91-6"><a href="sentiment.html#cb91-6" aria-hidden="true" tabindex="-1"></a><span class="fu">docvars</span>(mnb_corpus, <span class="st">&quot;positive&quot;</span>) <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(mnb_szentiment[, <span class="st">&quot;positive&quot;</span>])</span>
<span id="cb91-7"><a href="sentiment.html#cb91-7" aria-hidden="true" tabindex="-1"></a><span class="fu">docvars</span>(mnb_corpus, <span class="st">&quot;uncertainty&quot;</span>) <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(mnb_szentiment[, <span class="st">&quot;uncertainty&quot;</span>])</span>
<span id="cb91-8"><a href="sentiment.html#cb91-8" aria-hidden="true" tabindex="-1"></a><span class="fu">docvars</span>(mnb_corpus, <span class="st">&quot;constraining&quot;</span>) <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(mnb_szentiment[, <span class="st">&quot;constraining&quot;</span>])</span>
<span id="cb91-9"><a href="sentiment.html#cb91-9" aria-hidden="true" tabindex="-1"></a><span class="fu">docvars</span>(mnb_corpus, <span class="st">&quot;superfluous&quot;</span>) <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(mnb_szentiment[, <span class="st">&quot;superfluous&quot;</span>])</span>
<span id="cb91-10"><a href="sentiment.html#cb91-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-11"><a href="sentiment.html#cb91-11" aria-hidden="true" tabindex="-1"></a>mnb_df <span class="ot">&lt;-</span> <span class="fu">convert</span>(mnb_corpus, <span class="at">to =</span> <span class="st">&quot;data.frame&quot;</span>)</span></code></pre></div>
<p>A célunk, hogy szentiment kategóriánkénti bontásban mutassuk be az elemzésünk eredményét, de előtte egy kicsit alakítani kell az adattáblán, hogy a korábban már tárgyalt <em>tidy</em> formára hozzuk. A különböző szentiment értékeket tartalmazó oszlopokat fogjuk átrendezni úgy, hogy kreálunk egy „sent_type” változót, ahol a kategória nevet fogjuk eltárolni és egy „sent_score” változót, ahol a szentiment értéket. Ehhez a <code>tidyr</code>-ben található <code>pivot_longer()</code> föggvényt használjuk.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="sentiment.html#cb92-1" aria-hidden="true" tabindex="-1"></a>mnb_df <span class="ot">&lt;-</span> mnb_df <span class="sc">%&gt;%</span></span>
<span id="cb92-2"><a href="sentiment.html#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb92-3"><a href="sentiment.html#cb92-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> negative<span class="sc">:</span>superfluous,</span>
<span id="cb92-4"><a href="sentiment.html#cb92-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">&quot;sent_type&quot;</span>,</span>
<span id="cb92-5"><a href="sentiment.html#cb92-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">&quot;sent_score&quot;</span></span>
<span id="cb92-6"><a href="sentiment.html#cb92-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p>Az átalakítás után már könnyedén tudjuk kategóriákra bontva megjeleníteni az MNB közlemények különböző látens dimenzióit. Fontos emlékezni arra, hogy ez az eredmény a kulcsszavaink +/- 10 tokenes környezetében lévő szavak szentimentjét méri. Ami érdekes eredmény, hogy a felesleges „töltelék” (<em>superfluous</em>) szövegek szinte soha nem fordulnak elő a kulcsszavaink körül. A többi érték is nagyjából megfelel a várakozásainknak, habár a 2008-as gazdasági válság nem tűnik kiugró pontnak. Azonban a 2010 utáni európai válság már láthatóan megjelenik az idősorainkban.</p>
<p>Az általunk használt szótár alapvetően az Egyesült Államokban a tőzsdén kereskedő cégek publikus beszámolóiból készült, így elképzelhető, hogy egyes jegybanki környezetben sokat használt kifejezések nincsenek benne. A kapott eredmények validálása ezért is nagyon fontos, illetve érdemes azzal is tisztában lenni, hogy a szótáras módszer nem tökéletes (ahogy az emberi vagy más gépi kódolás sem).</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="sentiment.html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mnb_df, <span class="fu">aes</span>(date, sent_score)) <span class="sc">+</span></span>
<span id="cb93-2"><a href="sentiment.html#cb93-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb93-3"><a href="sentiment.html#cb93-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb93-4"><a href="sentiment.html#cb93-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Szentiment&quot;</span>,</span>
<span id="cb93-5"><a href="sentiment.html#cb93-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="cn">NULL</span></span>
<span id="cb93-6"><a href="sentiment.html#cb93-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb93-7"><a href="sentiment.html#cb93-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>sent_type, <span class="at">ncol =</span> <span class="dv">2</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-102"></span>
<p class="caption">
Figure 6.2: Magyar Nemzeti Bank közleményeinek szentimentje
</p>
<img src="_main_files/figure-html/unnamed-chunk-102-1.png" alt="Magyar Nemzeti Bank közleményeinek szentimentje" width="90%" />
</div>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="16">
<li id="fn16"><p>Bővebben lásd például: <span class="citation">(<a href="fuggelek.html#ref-liuSentimentAnalysisSubjectivity2010" role="doc-biblioref">Liu 2010</a>)</span><a href="sentiment.html#fnref16" class="footnote-back">↩︎</a></p></li>
<li id="fn17"><p>A lehetséges, területspecifikus szótáralkotási módszerekről részletesebben ezekben a tanulmányokban lehet olvasni: <span class="citation"><a href="fuggelek.html#ref-laver2000estimating" role="doc-biblioref">Laver and Garry</a> (<a href="fuggelek.html#ref-laver2000estimating" role="doc-biblioref">2000</a>)</span>; <span class="citation"><a href="fuggelek.html#ref-young2012affective" role="doc-biblioref">Young and Soroka</a> (<a href="fuggelek.html#ref-young2012affective" role="doc-biblioref">2012</a>)</span>; <span class="citation"><a href="fuggelek.html#ref-loughranWhenLiabilityNot2011" role="doc-biblioref">Loughran and McDonald</a> (<a href="fuggelek.html#ref-loughranWhenLiabilityNot2011" role="doc-biblioref">2011</a>)</span>; <span class="citation"><a href="fuggelek.html#ref-mateEffectCentralBank2021" role="doc-biblioref">Máté, Sebők, and Barczikay</a> (<a href="fuggelek.html#ref-mateEffectCentralBank2021" role="doc-biblioref">2021</a>)</span><a href="sentiment.html#fnref17" class="footnote-back">↩︎</a></p></li>
<li id="fn18"><p>A szótár és dokumentációja elérhető az alábbi linken: <a href="https://github.com/aesuli/SentiWordNet">https://github.com/aesuli/SentiWordNet</a><a href="sentiment.html#fnref18" class="footnote-back">↩︎</a></p></li>
<li id="fn19"><p>A quanteda.dictionaries csomag leírása és a benne található szótárak az alábbi github linken érhetőek el: <a href="https://github.com/kbenoit/quanteda.dictionaries" class="uri">https://github.com/kbenoit/quanteda.dictionaries</a><a href="sentiment.html#fnref19" class="footnote-back">↩︎</a></p></li>
<li id="fn20"><p>A szótár és dokumentációja elérhető itt: <a href="http://www2.imm.dtu.dk/pubdb/pubs/6010-full.html" class="uri">http://www2.imm.dtu.dk/pubdb/pubs/6010-full.html</a><a href="sentiment.html#fnref20" class="footnote-back">↩︎</a></p></li>
<li id="fn21"><p>A szótár és dokumentációja elérhető itt: <a href="https://www.cs.uic.edu/~liub/FBS/sentiment-analysis.html" class="uri">https://www.cs.uic.edu/~liub/FBS/sentiment-analysis.html</a><a href="sentiment.html#fnref21" class="footnote-back">↩︎</a></p></li>
<li id="fn22"><p>A szótár és dokumentációja elérhető itt: <a href="http://saifmohammad.com/WebPages/NRC-Emotion-Lexicon.htm" class="uri">http://saifmohammad.com/WebPages/NRC-Emotion-Lexicon.htm</a><a href="sentiment.html#fnref22" class="footnote-back">↩︎</a></p></li>
<li id="fn23"><p>A szentimentelemzéshez gyakran használt csomag még a <code>tidytext</code>. Online is szabadon elérhető könyvük <span class="citation"><a href="fuggelek.html#ref-silge2017text" role="doc-biblioref">Silge and Robinson</a> (<a href="fuggelek.html#ref-silge2017text" role="doc-biblioref">2017</a>)</span> 2. fejezetében részletesen is bemutatják a szerzők a <code>tidytext</code> munkafolyamatot: (<a href="https://www.tidytextmining.com/sentiment.html">https://www.tidytextmining.com/sentiment.html</a>).<a href="sentiment.html#fnref23" class="footnote-back">↩︎</a></p></li>
<li id="fn24"><p>A korpusz a Hungarian Compartive Agendas Project keretében készült és regisztáció után, kutatási célra elérhető az alábbi linken: <a href="https://cap.tk.hu/a-media-es-a-kozvelemeny-napirendje">https://cap.tk.hu/a-media-es-a-kozvelemeny-napirendje</a>.<a href="sentiment.html#fnref24" class="footnote-back">↩︎</a></p></li>
<li id="fn25"><p>A korpusz, a szótár és az elemzés teljes dokumentációja elérhető az alábbi github linken: <a href="https://github.com/poltextlab/central_bank_communication">https://github.com/poltextlab/central_bank_communication</a>, a teljes elemzés <span class="citation">(<a href="fuggelek.html#ref-mateEffectCentralBank2021" role="doc-biblioref">Máté, Sebők, and Barczikay 2021</a>)</span> elérhető: <a href="https://doi.org/10.1371/journal.pone.0245515">https://doi.org/10.1371/journal.pone.0245515</a><a href="sentiment.html#fnref25" class="footnote-back">↩︎</a></p></li>
<li id="fn26"><p>ELKH TK MILAB: <a href="https://milab.tk.hu/hu">https://milab.tk.hu/hu</a> A szótár és a hozzátartozó dokumentáció elérhető az alábbi github oldalon: <a href="https://github.com/poltextlab/sentiment_hun" class="uri">https://github.com/poltextlab/sentiment_hun</a><a href="sentiment.html#fnref26" class="footnote-back">↩︎</a></p></li>
<li id="fn27"><p>A csoportosított adatokkal való munka bővebb bemutatását lásd a <a href="fuggelek.html#fuggelek">Függelékben</a>.<a href="sentiment.html#fnref27" class="footnote-back">↩︎</a></p></li>
<li id="fn28"><p>A témával részletesen foglalkozó tanulmányban egy saját monetáris szentimentszótárat mutatunk be: Az implementáció és a hozzá tartozó R forráskód nyilvános: <a href="https://doi.org/10.6084/m9.figshare.13526156.v1" class="uri">https://doi.org/10.6084/m9.figshare.13526156.v1</a><a href="sentiment.html#fnref28" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="leiro-stat.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lda-ch.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
